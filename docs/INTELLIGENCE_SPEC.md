# Market Intelligence 기획서

> **Version**: 1.0.0  
> **Last Updated**: 2026-01-19  
> **관련 화면**: `market-data.html`, `news-intelligence.html`, `report-insight.html`

---

## 목차

1. [기능 개요](#1-기능-개요)
2. [Market Data](#2-market-data)
3. [News Intelligence](#3-news-intelligence)
4. [Report & Insight](#4-report--insight)
5. [데이터 소스](#5-데이터-소스)
6. [API 명세](#6-api-명세)

---

## 1. 기능 개요

### 1.1 목적

물류 시장의 주요 지표, 뉴스, 경고 정보를 실시간으로 제공하여 사용자의 의사결정을 지원합니다.

### 1.2 기능 구성

```
┌─────────────────────────────────────────────────────────────────────────┐
│                       Market Intelligence                                │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                          │
│  ┌──────────────────┐  ┌──────────────────┐  ┌──────────────────┐       │
│  │   Market Data    │  │ News Intelligence│  │ Report & Insight │       │
│  │                  │  │                  │  │                  │       │
│  │  • 환율          │  │  • 물류 뉴스     │  │  • 주간 리포트   │       │
│  │  • 금리          │  │  • 위기 경고     │  │  • 월간 리포트   │       │
│  │  • 경제 지표     │  │  • 키워드 분석   │  │  • 시장 분석     │       │
│  │  • 해운 지수     │  │  • 글로벌 맵     │  │  • PDF 다운로드  │       │
│  │                  │  │                  │  │                  │       │
│  └──────────────────┘  └──────────────────┘  └──────────────────┘       │
│                                                                          │
└─────────────────────────────────────────────────────────────────────────┘
```

### 1.3 접근 권한

| 기능 | Guest | Shipper | Forwarder |
|------|:-----:|:-------:|:---------:|
| Market Data | ✅ | ✅ | ✅ |
| News Intelligence | ✅ | ✅ | ✅ |
| Report & Insight | ✅ | ✅ | ✅ |

---

## 2. Market Data

### 2.1 화면: `market-data.html`

#### 2.1.1 레이아웃

```
┌─────────────────────────────────────────────────────────────────────────┐
│                              Header                                      │
├─────────────────────────────────────────────────────────────────────────┤
│  Market Data                                                             │
│  LIVE INDICES & ANALYTICS                                               │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                          │
│  [Economy]  [Logistics]                                                 │
│                                                                          │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                          │
│  ┌──────────────────┐  ┌────────────────────────────────────────────┐   │
│  │                  │  │                                            │   │
│  │  Financial       │  │              Chart Area                    │   │
│  │  Products        │  │                                            │   │
│  │  ────────────    │  │  ┌──────────────────────────────────────┐  │   │
│  │                  │  │  │  USD/KRW                              │  │   │
│  │  • Exchange KRW  │  │  │  1,432.50  ▲ +3.20 (+0.22%)          │  │   │
│  │  • Exchange USD  │  │  │                                      │  │   │
│  │  • Interest Rates│  │  │    [Line Chart - 환율 추이]          │  │   │
│  │  • Inflation     │  │  │                                      │  │   │
│  │  • GDP           │  │  │                                      │  │   │
│  │  • GDP per Capita│  │  │                                      │  │   │
│  │  • GNI           │  │  └──────────────────────────────────────┘  │   │
│  │  • Export/Import │  │                                            │   │
│  │  • Growth Rate   │  │  Period: [1W] [1M] [3M] [1Y]               │   │
│  │  • Unemployment  │  │                                            │   │
│  │  • Global Stocks │  │  ┌────────────────────────────────────┐    │   │
│  │                  │  │  │ High: 1,450.20  Low: 1,420.10      │    │   │
│  │                  │  │  │ Avg: 1,435.15   StdDev: 8.32       │    │   │
│  │                  │  │  └────────────────────────────────────┘    │   │
│  │                  │  │                                            │   │
│  └──────────────────┘  └────────────────────────────────────────────┘   │
│                                                                          │
└─────────────────────────────────────────────────────────────────────────┘
```

#### 2.1.2 탭 구성

| 탭 | 설명 | 데이터 소스 |
|-----|------|-------------|
| **Economy** | 경제 지표 | BOK API |
| **Logistics** | 해운/물류 지수 | 자체 DB |

### 2.2 Economy 탭 - 제공 지표

#### 2.2.1 환율 (Exchange Rate)

| 지표 | 코드 | 설명 |
|------|------|------|
| **USD/KRW** | USDKRW | 미국 달러 |
| **EUR/KRW** | EURKRW | 유로 |
| **JPY/KRW** | JPYKRW | 일본 엔 (100엔) |
| **CNY/KRW** | CNYKRW | 중국 위안 |
| **GBP/KRW** | GBPKRW | 영국 파운드 |

**차트 표시**:
- Line Chart: 기간별 환율 추이
- 현재값, 전일대비, 변동률
- 최고/최저/평균값

#### 2.2.2 금리 (Interest Rates)

| 지표 | 코드 | 설명 |
|------|------|------|
| **기준금리** | BASE_RATE | 한국 기준금리 |
| **국고채 3년** | KTB_3Y | 국고채 3년물 |
| **국고채 10년** | KTB_10Y | 국고채 10년물 |
| **회사채 AA-** | CORP_AA | 회사채 AA- |

#### 2.2.3 경제 지표

| 지표 | 코드 | 주기 | 설명 |
|------|------|------|------|
| **GDP** | GDP | 분기 | 국내총생산 |
| **GDP per Capita** | GDP_PC | 연간 | 1인당 GDP |
| **GNI** | GNI | 분기 | 국민총소득 |
| **물가상승률** | CPI | 월간 | 소비자물가지수 |
| **실업률** | UNEMP | 월간 | 실업률 |
| **수출액** | EXPORT | 월간 | 수출 금액 |
| **수입액** | IMPORT | 월간 | 수입 금액 |

### 2.3 Logistics 탭 - 해운 지수

| 지수 | 코드 | 설명 | 발표 주기 |
|------|------|------|-----------|
| **BDI** | BDI | Baltic Dry Index (발틱 건화물 지수) | 매일 |
| **SCFI** | SCFI | Shanghai Containerized Freight Index | 주간 |
| **CCFI** | CCFI | China Containerized Freight Index | 주간 |

**BDI (Baltic Dry Index)**:
- 철광석, 석탄, 곡물 등 건화물 운임 지표
- 글로벌 경기 선행지표로 활용

**SCFI (Shanghai Containerized Freight Index)**:
- 상하이 출발 컨테이너 운임 지수
- 아시아 → 유럽/미주 노선 반영

**CCFI (China Containerized Freight Index)**:
- 중국 전체 컨테이너 운임 지수
- 12개 주요 항로 포함

### 2.4 차트 컴포넌트

#### 2.4.1 기간 선택

| 버튼 | 기간 | 데이터 포인트 |
|------|------|---------------|
| **1W** | 1주일 | 7일 |
| **1M** | 1개월 | 30일 |
| **3M** | 3개월 | 90일 |
| **1Y** | 1년 | 365일 |

#### 2.4.2 차트 헤더 정보

```
┌─────────────────────────────────────────────────────────────────────────┐
│  USD/KRW                                                                 │
│  1,432.50  ▲ +3.20 (+0.22%)                                             │
│                                                                          │
│  High: 1,450.20    Low: 1,420.10    Avg: 1,435.15                       │
└─────────────────────────────────────────────────────────────────────────┘
```

| 항목 | 설명 |
|------|------|
| **현재값** | 가장 최근 데이터 |
| **변동** | 전일 대비 변동값 |
| **변동률** | 전일 대비 변동률 (%) |
| **High** | 조회 기간 최고값 |
| **Low** | 조회 기간 최저값 |
| **Avg** | 조회 기간 평균값 |

---

## 3. News Intelligence

### 3.1 화면: `news-intelligence.html`

#### 3.1.1 레이아웃

```
┌─────────────────────────────────────────────────────────────────────────┐
│                              Header                                      │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                          │
│  ┌──────────────┐  ┌─────────────────────────────────────────────────┐  │
│  │              │  │                                                 │  │
│  │   Sidebar    │  │               Main Content                      │  │
│  │              │  │                                                 │  │
│  │  ┌────────┐  │  │  ┌───────────────────────────────────────────┐  │  │
│  │  │ Daily  │  │  │  │                                           │  │  │
│  │  │Summary │  │  │  │           Global Map                      │  │  │
│  │  │        │  │  │  │         (이벤트 위치 표시)                 │  │  │
│  │  │ 1,234  │  │  │  │                                           │  │  │
│  │  │articles│  │  │  └───────────────────────────────────────────┘  │  │
│  │  └────────┘  │  │                                                 │  │
│  │              │  │  ┌───────────────────────────────────────────┐  │  │
│  │  ┌────────┐  │  │  │                                           │  │  │
│  │  │Category│  │  │  │           Word Cloud                      │  │  │
│  │  │ Chart  │  │  │  │          (키워드 분석)                    │  │  │
│  │  │ [Pie]  │  │  │  │                                           │  │  │
│  │  └────────┘  │  │  └───────────────────────────────────────────┘  │  │
│  │              │  │                                                 │  │
│  │  ┌────────┐  │  │  ┌───────────────────────────────────────────┐  │  │
│  │  │Critical│  │  │  │                                           │  │  │
│  │  │ Alerts │  │  │  │           News List                       │  │  │
│  │  │        │  │  │  │         (뉴스 카드 목록)                   │  │  │
│  │  │ ⚠️ 3   │  │  │  │                                           │  │  │
│  │  └────────┘  │  │  └───────────────────────────────────────────┘  │  │
│  │              │  │                                                 │  │
│  │  ┌────────┐  │  │                                                 │  │
│  │  │ Clock  │  │  │                                                 │  │
│  │  │(시간대)│  │  │                                                 │  │
│  │  └────────┘  │  │                                                 │  │
│  │              │  │                                                 │  │
│  └──────────────┘  └─────────────────────────────────────────────────┘  │
│                                                                          │
└─────────────────────────────────────────────────────────────────────────┘
```

### 3.2 사이드바 패널

#### 3.2.1 Daily Summary

| 항목 | 설명 |
|------|------|
| **Total Articles** | 최근 24시간 기사 수 |
| **Korea** | 국내 기사 수 |
| **Global** | 해외 기사 수 |
| **Last Updated** | 마지막 업데이트 시간 |

#### 3.2.2 Category Chart

뉴스 카테고리별 비율을 Pie Chart로 표시:

| 카테고리 | 코드 | 색상 |
|----------|------|------|
| **Crisis** | crisis | 빨간색 |
| **Ocean** | ocean | 파란색 |
| **Air** | air | 하늘색 |
| **Inland** | inland | 녹색 |
| **Economy** | economy | 보라색 |
| **ETC** | etc | 회색 |

#### 3.2.3 Critical Alerts

위기/긴급 뉴스 하이라이트:

```
┌─────────────────────────────────────────────┐
│  ⚠️ Critical Alerts                         │
├─────────────────────────────────────────────┤
│                                             │
│  🔴 홍해 지역 선박 공격 위험 증가            │
│     2h ago                                  │
│                                             │
│  🔴 항만 파업 예고 - 부산항                  │
│     5h ago                                  │
│                                             │
│  🟡 수에즈 운하 통행 지연 발생               │
│     1d ago                                  │
│                                             │
└─────────────────────────────────────────────┘
```

**심각도 레벨**:
| 레벨 | 아이콘 | 설명 |
|------|--------|------|
| **Severe** | 🔴 | 심각 - 즉각적 영향 |
| **Warning** | 🟡 | 경고 - 주의 필요 |
| **Watch** | 🟢 | 주시 - 모니터링 권장 |

#### 3.2.4 Operation Clocks

주요 물류 허브 현지 시간 표시:

| 도시 | 시간대 |
|------|--------|
| **Seoul** | KST (UTC+9) |
| **Shanghai** | CST (UTC+8) |
| **Singapore** | SGT (UTC+8) |
| **Rotterdam** | CET (UTC+1) |
| **Los Angeles** | PST (UTC-8) |

### 3.3 메인 콘텐츠

#### 3.3.1 Global Map

Leaflet.js 기반 인터랙티브 지도:
- 뉴스 이벤트 위치 마커 표시
- 마커 클릭 시 뉴스 요약 팝업
- 클러스터링 적용 (밀집 지역)

#### 3.3.2 Word Cloud

wordcloud2.js 기반 키워드 시각화:
- 뉴스 제목/본문에서 키워드 추출
- 빈도수에 따른 글자 크기 조절
- 클릭 시 해당 키워드 뉴스 필터링

#### 3.3.3 News List

뉴스 카드 목록:

```
┌─────────────────────────────────────────────────────────────────────────┐
│  [Crisis]  홍해 지역 선박 공격 위험 증가, 보험료 급등               🔴  │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                          │
│  예멘 후티 반군의 상선 공격이 계속되면서 홍해를 통과하는                  │
│  선박들의 전쟁 위험 보험료가 급등하고 있다...                            │
│                                                                          │
│  📍 Yemen, Red Sea                                    2 hours ago       │
│                                                                          │
│                                                       [Read More →]     │
└─────────────────────────────────────────────────────────────────────────┘
```

### 3.4 필터 옵션

| 필터 | 옵션 |
|------|------|
| **카테고리** | All, Crisis, Ocean, Air, Inland, Economy, ETC |
| **지역** | All, Korea, Global |
| **기간** | 24h, 7d, 30d |
| **키워드** | 검색어 입력 |

---

## 4. Report & Insight

### 4.1 화면: `report-insight.html`

#### 4.1.1 레이아웃

```
┌─────────────────────────────────────────────────────────────────────────┐
│                              Header                                      │
├─────────────────────────────────────────────────────────────────────────┤
│  Report & Insight                                                        │
│  물류 시장 분석 리포트                                                    │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                          │
│  ┌─────────────────────────────────────────────────────────────────┐    │
│  │                                                                 │    │
│  │  ┌──────────────────┐  ┌──────────────────┐                    │    │
│  │  │                  │  │                  │                    │    │
│  │  │  Weekly Report   │  │  Monthly Report  │                    │    │
│  │  │  2026년 1월 3주  │  │  2025년 12월     │                    │    │
│  │  │                  │  │                  │                    │    │
│  │  │  📊 시장 동향    │  │  📊 시장 동향    │                    │    │
│  │  │  📈 지수 분석    │  │  📈 지수 분석    │                    │    │
│  │  │  📰 주요 뉴스    │  │  📰 월간 이슈    │                    │    │
│  │  │                  │  │                  │                    │    │
│  │  │  [📥 PDF 다운로드]│  │  [📥 PDF 다운로드]│                    │    │
│  │  │                  │  │                  │                    │    │
│  │  └──────────────────┘  └──────────────────┘                    │    │
│  │                                                                 │    │
│  └─────────────────────────────────────────────────────────────────┘    │
│                                                                          │
│  ┌─────────────────────────────────────────────────────────────────┐    │
│  │  Past Reports                                                   │    │
│  │  ─────────────────────────────────────────────────────────────  │    │
│  │                                                                 │    │
│  │  • 2026년 1월 2주 주간 리포트                      [📥 다운로드]  │    │
│  │  • 2026년 1월 1주 주간 리포트                      [📥 다운로드]  │    │
│  │  • 2025년 12월 월간 리포트                         [📥 다운로드]  │    │
│  │  • ...                                                          │    │
│  │                                                                 │    │
│  └─────────────────────────────────────────────────────────────────┘    │
│                                                                          │
└─────────────────────────────────────────────────────────────────────────┘
```

### 4.2 리포트 유형

| 유형 | 발행 주기 | 내용 |
|------|-----------|------|
| **Weekly Report** | 매주 월요일 | 주간 시장 동향, 지수 분석 |
| **Monthly Report** | 매월 초 | 월간 종합 분석, 전망 |
| **Special Report** | 비정기 | 특별 이슈 분석 |

### 4.3 리포트 구성

**Weekly Report 목차**:
1. Executive Summary
2. 해운 지수 동향 (BDI, SCFI, CCFI)
3. 환율 동향
4. 주요 뉴스 요약
5. 다음 주 전망

**Monthly Report 목차**:
1. Executive Summary
2. 월간 시장 종합 분석
3. 노선별 운임 동향
4. 경제 지표 분석
5. 월간 이슈 정리
6. 다음 달 전망

---

## 5. 데이터 소스

### 5.1 외부 API

| API | 제공 데이터 | 호출 주기 |
|-----|-------------|-----------|
| **BOK API** | 환율, 금리, 경제지표 | 1시간 |
| **GDELT API** | 글로벌 뉴스, 이벤트 | 15분 |

### 5.2 내부 DB

| 테이블 | 설명 | 위치 |
|--------|------|------|
| **shipping_indices** | BDI, SCFI, CCFI | `shipping_indices.db` |
| **news** | 뉴스 데이터 | `news_intelligence.db` |
| **alerts** | 위기 경고 | `news_intelligence.db` |

### 5.3 데이터 수집 스케줄

| 데이터 | 수집 주기 | 방식 |
|--------|-----------|------|
| 환율 | 매시간 | BOK API 호출 |
| 금리 | 매일 | BOK API 호출 |
| BDI | 매일 | 크롤링 |
| SCFI | 매주 금요일 | 크롤링 |
| CCFI | 매주 금요일 | 크롤링 |
| 뉴스 (국내) | 30분 | 크롤링 |
| 뉴스 (글로벌) | 15분 | GDELT API |

---

## 6. API 명세

### 6.1 시장 지수 조회

**Endpoint**: `GET /api/market/indices`

**Query Parameters**:
| 파라미터 | 타입 | 필수 | 설명 |
|----------|------|------|------|
| type | string | Y | exchange/interest/bdi/scfi/ccfi |
| itemCode | string | N | 세부 항목 코드 |
| startDate | string | N | 시작일 (YYYYMMDD) |
| endDate | string | N | 종료일 (YYYYMMDD) |
| cycle | string | N | D(일)/W(주)/M(월) |

**Response**:
```json
{
  "success": true,
  "data": [
    {
      "date": "2026-01-19",
      "value": 1432.50,
      "change": 3.20,
      "change_percent": 0.22
    }
  ],
  "stats": {
    "high": 1450.20,
    "low": 1420.10,
    "avg": 1435.15,
    "std_dev": 8.32
  }
}
```

### 6.2 해운 지수 조회

**Endpoint**: `GET /api/shipping/indices`

**Query Parameters**:
| 파라미터 | 타입 | 필수 | 설명 |
|----------|------|------|------|
| index_type | string | Y | BDI/SCFI/CCFI/all |
| days | number | N | 조회 기간 (기본: 7) |

**Response**:
```json
{
  "success": true,
  "indices": {
    "BDI": {
      "latest": 1523,
      "change": -15,
      "change_percent": -0.98,
      "history": [
        {"date": "2026-01-19", "value": 1523},
        {"date": "2026-01-18", "value": 1538}
      ]
    },
    "SCFI": {
      "latest": 1845.32,
      "change": 23.15,
      "change_percent": 1.27,
      "history": [...]
    }
  }
}
```

### 6.3 뉴스 조회

**Endpoint**: `GET /api/news/list`

**Query Parameters**:
| 파라미터 | 타입 | 필수 | 설명 |
|----------|------|------|------|
| category | string | N | crisis/ocean/air/inland/economy/etc |
| news_type | string | N | KR/GLOBAL |
| is_crisis | boolean | N | 위기 뉴스만 |
| limit | number | N | 결과 수 (기본: 20) |
| offset | number | N | 시작 위치 |

**Response**:
```json
{
  "success": true,
  "total": 1234,
  "news": [
    {
      "id": 1,
      "title": "홍해 지역 선박 공격 위험 증가",
      "summary": "예멘 후티 반군의 상선 공격이...",
      "category": "crisis",
      "severity": "severe",
      "source": "Lloyd's List",
      "url": "https://...",
      "location": {
        "name": "Red Sea",
        "lat": 20.5,
        "lng": 38.5
      },
      "published_at": "2026-01-19T10:30:00Z"
    }
  ]
}
```

### 6.4 위기 경고 조회

**Endpoint**: `GET /api/news/alerts`

**Response**:
```json
{
  "success": true,
  "alerts": [
    {
      "id": 1,
      "title": "홍해 지역 선박 공격 위험",
      "severity": "severe",
      "category": "crisis",
      "region": "Red Sea",
      "published_at": "2026-01-19T10:30:00Z"
    }
  ]
}
```

### 6.5 키워드 분석

**Endpoint**: `GET /api/news/keywords`

**Response**:
```json
{
  "success": true,
  "keywords": [
    {"word": "운임", "count": 156},
    {"word": "컨테이너", "count": 132},
    {"word": "홍해", "count": 98},
    {"word": "파업", "count": 45}
  ]
}
```

---

## 변경 이력

| 버전 | 날짜 | 작성자 | 변경 내용 |
|------|------|--------|-----------|
| 1.0.0 | 2026-01-19 | - | 초기 작성 |
