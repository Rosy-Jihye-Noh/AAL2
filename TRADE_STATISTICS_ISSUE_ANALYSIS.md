# ìˆ˜ì¶œì… í†µê³„ í˜ì´ì§€ ë¬¸ì œì  ë¶„ì„ ë³´ê³ ì„œ

## ğŸ“‹ ë¶„ì„ ê°œìš”
- **ë¶„ì„ ì¼ì‹œ**: 2025-01-XX
- **ëŒ€ìƒ í˜ì´ì§€**: ìˆ˜ì¶œì… í†µê³„ (Trade Statistics)
- **ì£¼ìš” ë¬¸ì œ**: ì›í™” í™˜ì‚°ê°’ì´ í—¤ë”ì— í‘œì‹œë˜ì§€ ì•ŠìŒ

---

## ğŸ” ê° Agentë³„ ë¬¸ì œì  ë¶„ì„

### 1. Frontend Agent ë¶„ì„

#### ë°œê²¬ëœ ë¬¸ì œì 

**1.1 ì›í™” í™˜ì‚°ê°’ í‘œì‹œ ë¡œì§ ë¬¸ì œ**
- **ìœ„ì¹˜**: `updateTradeChartHeader()` í•¨ìˆ˜ (6202-6263ì¤„)
- **ë¬¸ì œ**: 
  - `tradeDataKRW` ë°ì´í„°ê°€ ì¡´ì¬í•˜ë”ë¼ë„ ì›í™” í™˜ì‚°ê°’ì´ í‘œì‹œë˜ì§€ ì•ŠìŒ
  - ë‚ ì§œ ë§¤ì¹­ ë¡œì§ì´ ë³µì¡í•˜ê³ , í™˜ìœ¨ ë°ì´í„°ê°€ ì—†ì„ ê²½ìš° ì²˜ë¦¬ë˜ì§€ ì•ŠìŒ
  - `getExchangeRateForDate()` í•¨ìˆ˜ê°€ `null`ì„ ë°˜í™˜í•  ê²½ìš° KRW ë³€í™˜ê°’ì´ ìƒì„±ë˜ì§€ ì•ŠìŒ

**1.2 í™˜ìœ¨ ë°ì´í„° ë¡œë”© íƒ€ì´ë° ë¬¸ì œ**
- **ìœ„ì¹˜**: `fetchTradeData()` í•¨ìˆ˜ (5712-5789ì¤„)
- **ë¬¸ì œ**:
  - `fetchTradeExchangeRates()`ê°€ `await`ë¡œ í˜¸ì¶œë˜ì§€ë§Œ, í™˜ìœ¨ ë°ì´í„°ê°€ ë¹„ì–´ìˆì„ ìˆ˜ ìˆìŒ
  - í™˜ìœ¨ API í˜¸ì¶œ ì‹¤íŒ¨ ì‹œ `console.warn`ë§Œ ì¶œë ¥í•˜ê³  ê³„ì† ì§„í–‰
  - í™˜ìœ¨ ë°ì´í„°ê°€ ì—†ìœ¼ë©´ `tradeDataKRW`ê°€ ë¹ˆ ë°°ì—´ë¡œ ë‚¨ìŒ

**1.3 ë‚ ì§œ í˜•ì‹ ë¶ˆì¼ì¹˜ ê°€ëŠ¥ì„±**
- **ìœ„ì¹˜**: `getExchangeRateForDate()` í•¨ìˆ˜ (5832-5848ì¤„)
- **ë¬¸ì œ**:
  - í™˜ìœ¨ APIëŠ” ì¼ë³„(D) ë°ì´í„°ë¥¼ ë°˜í™˜í•˜ì§€ë§Œ, ìˆ˜ì¶œì… í†µê³„ëŠ” ì›”ë³„(M) ë°ì´í„°
  - í™˜ìœ¨ API í˜¸ì¶œ ì‹œ `cycle=${tradeCycle}`ë¡œ ì „ë‹¬í•˜ì§€ë§Œ, í™˜ìœ¨ APIëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ì¼ë³„(D) ë°ì´í„°ë§Œ ì œê³µ
  - ì›”ë³„ ìˆ˜ì¶œì… ë°ì´í„°(YYYYMM)ì™€ ì¼ë³„ í™˜ìœ¨ ë°ì´í„°(YYYYMMDD) ê°„ ë§¤ì¹­ ì‹¤íŒ¨ ê°€ëŠ¥ì„±

**1.4 ë””ë²„ê¹… ì •ë³´ ë¶€ì¡±**
- ì›í™” í™˜ì‚°ê°’ì´ í‘œì‹œë˜ì§€ ì•ŠëŠ” ì›ì¸ì„ íŒŒì•…í•˜ê¸° ì–´ë ¤ì›€
- ì½˜ì†” ë¡œê·¸ê°€ ë¶€ì¡±í•˜ì—¬ ë°ì´í„° íë¦„ ì¶”ì  ë¶ˆê°€

#### ê¶Œì¥ ìˆ˜ì • ì‚¬í•­

1. **í™˜ìœ¨ API í˜¸ì¶œ ìˆ˜ì •**
   ```javascript
   // í™˜ìœ¨ APIëŠ” í•­ìƒ ì¼ë³„(D)ë¡œ í˜¸ì¶œí•˜ê³ , ì›”ë³„ ë°ì´í„°ëŠ” í•´ë‹¹ ì›”ì˜ í‰ê·  ë˜ëŠ” ë§ì¼ í™˜ìœ¨ ì‚¬ìš©
   const exchangeUrl = `${API_BASE}/market/indices?type=exchange&itemCode=USD&startDate=${startDate}&endDate=${endDate}&cycle=D`;
   ```

2. **ë‚ ì§œ ë§¤ì¹­ ë¡œì§ ê°œì„ **
   ```javascript
   function getExchangeRateForDate(date) {
       if (tradeCycle === 'M') {
           // YYYYMM í˜•ì‹ -> í•´ë‹¹ ì›”ì˜ ë§ì¼ í™˜ìœ¨ ì‚¬ìš©
           const year = date.substring(0, 4);
           const month = date.substring(4, 6);
           // í•´ë‹¹ ì›”ì˜ ë§ˆì§€ë§‰ ë‚ ì§œ ì°¾ê¸°
           const lastDay = new Date(year, month, 0).getDate();
           const dateKey = `${year}${month}${String(lastDay).padStart(2, '0')}`;
           // ë˜ëŠ” í•´ë‹¹ ì›”ì˜ í‰ê·  í™˜ìœ¨ ê³„ì‚°
           return getMonthlyAverageRate(year, month);
       }
       // ...
   }
   ```

3. **ì—ëŸ¬ ì²˜ë¦¬ ê°•í™”**
   - í™˜ìœ¨ ë°ì´í„°ê°€ ì—†ì„ ê²½ìš° ì‚¬ìš©ìì—ê²Œ ì•Œë¦¼
   - ì›í™” í™˜ì‚°ê°’ ê³„ì‚° ì‹¤íŒ¨ ì‹œ ë¡œê·¸ ì¶œë ¥

---

### 2. Backend Agent ë¶„ì„

#### ë°œê²¬ëœ ë¬¸ì œì 

**2.1 í™˜ìœ¨ API ì—”ë“œí¬ì¸íŠ¸ í™•ì¸ í•„ìš”**
- **ìœ„ì¹˜**: `server/bok_backend.py` - `BOK_MAPPING['exchange']`
- **ë¬¸ì œ**:
  - í™˜ìœ¨ API(`731Y001`)ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ì¼ë³„(D) ë°ì´í„°ë§Œ ì œê³µ
  - ì›”ë³„/ë¶„ê¸°ë³„ í™˜ìœ¨ ë°ì´í„°ë¥¼ ìš”ì²­í•  ê²½ìš° ë°ì´í„°ê°€ ì—†ì„ ìˆ˜ ìˆìŒ
  - í”„ë¡ íŠ¸ì—”ë“œì—ì„œ `cycle=M`ìœ¼ë¡œ í™˜ìœ¨ì„ ìš”ì²­í•˜ë©´ ë¹ˆ ì‘ë‹µ ê°€ëŠ¥

**2.2 API ì‘ë‹µ í˜•ì‹ ì¼ê´€ì„±**
- í™˜ìœ¨ APIì™€ ìˆ˜ì¶œì… í†µê³„ APIì˜ ì‘ë‹µ í˜•ì‹ì€ ì¼ì¹˜í•˜ì§€ë§Œ, ì£¼ê¸°(cycle) ì²˜ë¦¬ ë°©ì‹ì´ ë‹¤ë¦„
- í™˜ìœ¨ APIëŠ” ì¼ë³„ë§Œ ì§€ì›í•˜ë¯€ë¡œ, ì›”ë³„/ë¶„ê¸°ë³„ ë°ì´í„°ê°€ í•„ìš”í•œ ê²½ìš° í”„ë¡ íŠ¸ì—”ë“œì—ì„œ ë³€í™˜ í•„ìš”

#### ê¶Œì¥ ìˆ˜ì • ì‚¬í•­

1. **í™˜ìœ¨ API ë¬¸ì„œí™”**
   - í™˜ìœ¨ APIëŠ” ì¼ë³„(D)ë§Œ ì§€ì›í•œë‹¤ëŠ” ì ì„ ëª…í™•íˆ ë¬¸ì„œí™”
   - ì›”ë³„/ë¶„ê¸°ë³„ ë°ì´í„°ê°€ í•„ìš”í•œ ê²½ìš° í”„ë¡ íŠ¸ì—”ë“œì—ì„œ ì²˜ë¦¬í•´ì•¼ í•¨ì„ ëª…ì‹œ

2. **ë°±ì—”ë“œì—ì„œ ì›”ë³„ í™˜ìœ¨ ì§‘ê³„ ì œê³µ (ì„ íƒì‚¬í•­)**
   - ë°±ì—”ë“œì—ì„œ ì¼ë³„ í™˜ìœ¨ ë°ì´í„°ë¥¼ ì›”ë³„ë¡œ ì§‘ê³„í•˜ì—¬ ì œê³µí•˜ëŠ” ì—”ë“œí¬ì¸íŠ¸ ì¶”ê°€ ê³ ë ¤

---

### 3. UI/UX Agent ë¶„ì„

#### ë°œê²¬ëœ ë¬¸ì œì 

**3.1 ì‚¬ìš©ì í”¼ë“œë°± ë¶€ì¡±**
- ì›í™” í™˜ì‚°ê°’ì´ í‘œì‹œë˜ì§€ ì•Šì„ ë•Œ ì‚¬ìš©ìê°€ ì›ì¸ì„ ì•Œ ìˆ˜ ì—†ìŒ
- ë¡œë”© ìƒíƒœë‚˜ ì—ëŸ¬ ìƒíƒœì— ëŒ€í•œ ì‹œê°ì  í”¼ë“œë°± ì—†ìŒ

**3.2 ì •ë³´ í‘œì‹œ ì¼ê´€ì„±**
- ë‹¤ë¥¸ íŒ¨ë„(ì£¼ìš” ì§€í‘œ)ì—ì„œëŠ” ì›í™” í™˜ì‚°ê°’ì´ ì •ìƒ í‘œì‹œë¨
- ìˆ˜ì¶œì… í†µê³„ íŒ¨ë„ë§Œ ì›í™” í™˜ì‚°ê°’ì´ í‘œì‹œë˜ì§€ ì•Šì•„ ì¼ê´€ì„± ë¶€ì¡±

#### ê¶Œì¥ ìˆ˜ì • ì‚¬í•­

1. **ë¡œë”© ìƒíƒœ í‘œì‹œ**
   - í™˜ìœ¨ ë°ì´í„° ë¡œë”© ì¤‘ì„ì„ í‘œì‹œ
   - ì›í™” í™˜ì‚°ê°’ ê³„ì‚° ì¤‘ì„ì„ í‘œì‹œ

2. **ì—ëŸ¬ ìƒíƒœ í‘œì‹œ**
   - í™˜ìœ¨ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ì§€ ëª»í•œ ê²½ìš° ì‚¬ìš©ìì—ê²Œ ì•Œë¦¼
   - ì›í™” í™˜ì‚°ê°’ì„ ê³„ì‚°í•  ìˆ˜ ì—†ëŠ” ê²½ìš° í‘œì‹œ

---

### 4. Planner Agent ë¶„ì„

#### ë°œê²¬ëœ ë¬¸ì œì 

**4.1 ìš”êµ¬ì‚¬í•­ ëª…í™•ì„±**
- ì›í™” í™˜ì‚°ê°’ í‘œì‹œ ìš”êµ¬ì‚¬í•­ì€ ëª…í™•í•˜ì§€ë§Œ, êµ¬í˜„ ì„¸ë¶€ì‚¬í•­ì´ ë¶€ì¡±
- í™˜ìœ¨ ë°ì´í„° ì†ŒìŠ¤ ë° ì²˜ë¦¬ ë°©ì‹ì— ëŒ€í•œ ëª…ì„¸ ë¶€ì¡±

**4.2 ê¸°ëŠ¥ ìš°ì„ ìˆœìœ„**
- ì›í™” í™˜ì‚°ê°’ í‘œì‹œëŠ” í•µì‹¬ ê¸°ëŠ¥ì´ì§€ë§Œ, ì—ëŸ¬ ì²˜ë¦¬ ë° ì‚¬ìš©ì í”¼ë“œë°±ì´ ë¶€ì¡±

#### ê¶Œì¥ ìˆ˜ì • ì‚¬í•­

1. **ê¸°ëŠ¥ ëª…ì„¸ ë³´ì™„**
   - í™˜ìœ¨ ë°ì´í„° ì†ŒìŠ¤ ëª…ì‹œ
   - ì›”ë³„/ë¶„ê¸°ë³„ í™˜ìœ¨ ì²˜ë¦¬ ë°©ì‹ ëª…ì‹œ
   - ì—ëŸ¬ ì²˜ë¦¬ ë° í´ë°± ì „ëµ ëª…ì‹œ

---

## ğŸ¯ ì¢…í•© ë¬¸ì œì  ë° í•´ê²° ë°©ì•ˆ

### í•µì‹¬ ë¬¸ì œ

1. **í™˜ìœ¨ API í˜¸ì¶œ ì‹œ cycle íŒŒë¼ë¯¸í„° ë¶ˆì¼ì¹˜**
   - ìˆ˜ì¶œì… í†µê³„ëŠ” ì›”ë³„(M)ì´ì§€ë§Œ, í™˜ìœ¨ APIëŠ” ì¼ë³„(D)ë§Œ ì§€ì›
   - í”„ë¡ íŠ¸ì—”ë“œì—ì„œ `cycle=M`ìœ¼ë¡œ í™˜ìœ¨ì„ ìš”ì²­í•˜ë©´ ë°ì´í„°ê°€ ì—†ì„ ìˆ˜ ìˆìŒ

2. **ë‚ ì§œ ë§¤ì¹­ ë¡œì§ ë¬¸ì œ**
   - ì›”ë³„ ìˆ˜ì¶œì… ë°ì´í„°(YYYYMM)ì™€ ì¼ë³„ í™˜ìœ¨ ë°ì´í„°(YYYYMMDD) ê°„ ë§¤ì¹­ ì‹¤íŒ¨
   - `getExchangeRateForDate()` í•¨ìˆ˜ê°€ ì›”ë³„ ë°ì´í„°ë¥¼ ì²˜ë¦¬í•˜ì§€ ëª»í•¨

3. **ì—ëŸ¬ ì²˜ë¦¬ ë¶€ì¡±**
   - í™˜ìœ¨ ë°ì´í„°ê°€ ì—†ì„ ê²½ìš° ì¡°ìš©íˆ ì‹¤íŒ¨
   - ì‚¬ìš©ìì—ê²Œ í”¼ë“œë°± ì—†ìŒ

### í•´ê²° ë°©ì•ˆ

#### ì¦‰ì‹œ ìˆ˜ì • í•„ìš” (High Priority)

1. **í™˜ìœ¨ API í˜¸ì¶œ ìˆ˜ì •**
   ```javascript
   // fetchTradeExchangeRates í•¨ìˆ˜ ìˆ˜ì •
   async function fetchTradeExchangeRates(startDate, endDate) {
       try {
           // í™˜ìœ¨ APIëŠ” í•­ìƒ ì¼ë³„(D)ë¡œ í˜¸ì¶œ
           const exchangeUrl = `${API_BASE}/market/indices?type=exchange&itemCode=USD&startDate=${startDate}&endDate=${endDate}&cycle=D`;
           // ...
       }
   }
   ```

2. **ë‚ ì§œ ë§¤ì¹­ ë¡œì§ ê°œì„ **
   ```javascript
   function getExchangeRateForDate(date) {
       if (tradeCycle === 'M') {
           // YYYYMM í˜•ì‹ -> í•´ë‹¹ ì›”ì˜ í‰ê·  í™˜ìœ¨ ë˜ëŠ” ë§ì¼ í™˜ìœ¨ ì‚¬ìš©
           const year = date.substring(0, 4);
           const month = date.substring(4, 6);
           
           // í•´ë‹¹ ì›”ì˜ ëª¨ë“  ì¼ë³„ í™˜ìœ¨ ë°ì´í„° ì°¾ê¸°
           const monthPrefix = `${year}${month}`;
           const monthRates = Object.keys(tradeExchangeRates)
               .filter(key => key.startsWith(monthPrefix))
               .map(key => tradeExchangeRates[key])
               .filter(rate => rate > 0);
           
           if (monthRates.length > 0) {
               // í‰ê·  í™˜ìœ¨ ì‚¬ìš©
               const avgRate = monthRates.reduce((sum, rate) => sum + rate, 0) / monthRates.length;
               return avgRate;
           }
           
           // í‰ê· ì„ êµ¬í•  ìˆ˜ ì—†ìœ¼ë©´ í•´ë‹¹ ì›”ì˜ ë§ˆì§€ë§‰ ë‚ ì§œ í™˜ìœ¨ ì‚¬ìš©
           const lastDay = new Date(year, month, 0).getDate();
           const dateKey = `${year}${month}${String(lastDay).padStart(2, '0')}`;
           return tradeExchangeRates[dateKey] || null;
       }
       // ...
   }
   ```

3. **ë””ë²„ê¹… ë¡œê·¸ ì¶”ê°€**
   ```javascript
   // updateTradeChartHeader í•¨ìˆ˜ì— ë¡œê·¸ ì¶”ê°€
   console.log('tradeDataKRW:', tradeDataKRW);
   console.log('lastDate:', lastDate);
   console.log('krwValue:', krwValue);
   ```

#### ì¤‘ê¸° ê°œì„  ì‚¬í•­ (Medium Priority)

1. **ì—ëŸ¬ ì²˜ë¦¬ ê°•í™”**
   - í™˜ìœ¨ ë°ì´í„° ë¡œë”© ì‹¤íŒ¨ ì‹œ ì‚¬ìš©ì ì•Œë¦¼
   - ì›í™” í™˜ì‚°ê°’ ê³„ì‚° ì‹¤íŒ¨ ì‹œ í´ë°± ì²˜ë¦¬

2. **ë¡œë”© ìƒíƒœ í‘œì‹œ**
   - í™˜ìœ¨ ë°ì´í„° ë¡œë”© ì¤‘ í‘œì‹œ
   - ì›í™” í™˜ì‚°ê°’ ê³„ì‚° ì¤‘ í‘œì‹œ

---

## ğŸ“ ì²´í¬ë¦¬ìŠ¤íŠ¸

### Frontend Agent
- [ ] í™˜ìœ¨ API í˜¸ì¶œ ì‹œ cycle íŒŒë¼ë¯¸í„°ë¥¼ 'D'ë¡œ ìˆ˜ì •
- [ ] `getExchangeRateForDate()` í•¨ìˆ˜ì˜ ì›”ë³„ ì²˜ë¦¬ ë¡œì§ ê°œì„ 
- [ ] ë””ë²„ê¹… ë¡œê·¸ ì¶”ê°€
- [ ] ì—ëŸ¬ ì²˜ë¦¬ ê°•í™”

### Backend Agent
- [ ] í™˜ìœ¨ API ë¬¸ì„œí™” (ì¼ë³„ë§Œ ì§€ì› ëª…ì‹œ)
- [ ] ì›”ë³„ í™˜ìœ¨ ì§‘ê³„ ì—”ë“œí¬ì¸íŠ¸ ì¶”ê°€ ê²€í† 

### UI/UX Agent
- [ ] ë¡œë”© ìƒíƒœ í‘œì‹œ ì¶”ê°€
- [ ] ì—ëŸ¬ ìƒíƒœ í‘œì‹œ ì¶”ê°€
- [ ] ì‚¬ìš©ì í”¼ë“œë°± ê°œì„ 

### Planner Agent
- [ ] ê¸°ëŠ¥ ëª…ì„¸ ë³´ì™„
- [ ] ì—ëŸ¬ ì²˜ë¦¬ ë° í´ë°± ì „ëµ ë¬¸ì„œí™”

---

## ğŸ”— ê´€ë ¨ íŒŒì¼

- `frontend/ai_studio_code_F2.html` (5712-6263ì¤„)
- `server/bok_backend.py` (29-210ì¤„)
- `.cursor/rules/frontend-rule/AGENT_RULE.md`
- `.cursor/rules/backend-rule/AGENT_RULE.md`
- `.cursor/rules/uiux-rule/AGENT_RULE.md`







